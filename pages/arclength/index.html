<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Arc length
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".9jihtm016o" data-react-checksum="1447628643"><div class="ribbon" data-reactid=".9jihtm016o.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".9jihtm016o.0.0"/><map name="githubmap" data-reactid=".9jihtm016o.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".9jihtm016o.0.1.0"/></map></div><header data-reactid=".9jihtm016o.1"><h1 data-reactid=".9jihtm016o.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".9jihtm016o.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".9jihtm016o.2"><table class="relatives before" data-reactid=".9jihtm016o.2.0"><tbody data-reactid=".9jihtm016o.2.0.0"><tr data-reactid=".9jihtm016o.2.0.0.0"><td data-reactid=".9jihtm016o.2.0.0.0.0"><a class="prev" href="canonical" data-reactid=".9jihtm016o.2.0.0.0.0.0">18. Canonical form (for cubic curves)</a></td><td class="toc" data-reactid=".9jihtm016o.2.0.0.0.1"><a class="" href="/" data-reactid=".9jihtm016o.2.0.0.0.1.0">ToC</a></td><td data-reactid=".9jihtm016o.2.0.0.0.2"><a class="next" href="arclengthapprox" data-reactid=".9jihtm016o.2.0.0.0.2.0">20. Approximated arc length</a></td></tr></tbody></table><section data-reactid=".9jihtm016o.2.$arclength"><h2 data-num="19" data-reactid=".9jihtm016o.2.$arclength.0"><a href="#arclength" data-reactid=".9jihtm016o.2.$arclength.0.0">Arc length</a></h2><p data-reactid=".9jihtm016o.2.$arclength.1"><span data-reactid=".9jihtm016o.2.$arclength.1.0">How long is a Bézier curve? As it turns out, that&#x27;s not actually an easy question, because the answer requires maths that —much like root finding— cannot generally be solved the traditional way. If we have a parametric curve with </span><i data-reactid=".9jihtm016o.2.$arclength.1.1"><span data-reactid=".9jihtm016o.2.$arclength.1.1.0">f</span><sub data-reactid=".9jihtm016o.2.$arclength.1.1.1">x</sub><span data-reactid=".9jihtm016o.2.$arclength.1.1.2">(t)</span></i><span data-reactid=".9jihtm016o.2.$arclength.1.2"> and </span><i data-reactid=".9jihtm016o.2.$arclength.1.3"><span data-reactid=".9jihtm016o.2.$arclength.1.3.0">f</span><sub data-reactid=".9jihtm016o.2.$arclength.1.3.1">y</sub><span data-reactid=".9jihtm016o.2.$arclength.1.3.2">(t)</span></i><span data-reactid=".9jihtm016o.2.$arclength.1.4">, then the length of the curve, measured from start point to some point </span><i data-reactid=".9jihtm016o.2.$arclength.1.5">t = z</i><span data-reactid=".9jihtm016o.2.$arclength.1.6">, is computed using the following seemingly straight forward (if a bit overwhelming) formula:</span></p><p data-reactid=".9jihtm016o.2.$arclength.2"><img class="LaTeX SVG" src="images/latex/16e3f81dfc12c526ca53b477b2aa67ef7b56bfe2.svg" style="width:10.42515rem;height:2.475rem;" data-reactid=".9jihtm016o.2.$arclength.2.0"/></p><p data-reactid=".9jihtm016o.2.$arclength.3">or, more commonly written using Leibnitz notation as:</p><p data-reactid=".9jihtm016o.2.$arclength.4"><img class="LaTeX SVG" src="images/latex/8e2857c32b23969bca67b0ead318493a3e61dc4a.svg" style="width:17.1rem;height:2.475rem;" data-reactid=".9jihtm016o.2.$arclength.4.0"/></p><p data-reactid=".9jihtm016o.2.$arclength.5"><span data-reactid=".9jihtm016o.2.$arclength.5.0">This formula says that the length of a parametric curve is in fact equal to the </span><b data-reactid=".9jihtm016o.2.$arclength.5.1">area</b><span data-reactid=".9jihtm016o.2.$arclength.5.2"> underneath a function that looks a remarkable amount like Pythagoras&#x27; rule for computing the diagonal of a straight angled triangle. This sounds pretty simple, right? Sadly, it&#x27;s far from simple... cutting straight to after the chase is over: for quadratic curves, this formula generates an </span><a href="http://www.wolframalpha.com/input/?i=antiderivative+for+sqrt((2*(1-t)*t*B+%2b+t^2*C)&#x27;^2+%2b+(2*(1-t)*t*E)&#x27;^2)&amp;incParTime=true" data-reactid=".9jihtm016o.2.$arclength.5.3">unwieldy computation</a><span data-reactid=".9jihtm016o.2.$arclength.5.4">, and we&#x27;re simply not going to implement things that way. For cubic Bézier curves, things get even more fun, because there is no &quot;closed form&quot; solution, meaning that due to the way calculus works, there is no generic formula that allows you to calculate the arc length. Let me just repeat this, because it&#x27;s fairly crucial: </span><strong data-reactid=".9jihtm016o.2.$arclength.5.5"><em data-reactid=".9jihtm016o.2.$arclength.5.5.0">for cubic and higher Bézier curves, there is no way to solve this function if you want to use it &quot;for all possible coordinates&quot;.</em></strong></p><p data-reactid=".9jihtm016o.2.$arclength.6"><span data-reactid=".9jihtm016o.2.$arclength.6.0">Seriously: </span><a href="https://en.wikipedia.org/wiki/Abel%E2%80%93Ruffini_theorem" data-reactid=".9jihtm016o.2.$arclength.6.1">It cannot be done.</a></p><p data-reactid=".9jihtm016o.2.$arclength.7"><span data-reactid=".9jihtm016o.2.$arclength.7.0">So we turn to numerical approaches again. The method we&#x27;ll look at here is the</span><a href="http://www.youtube.com/watch?v=unWguclP-Ds&amp;feature=BFa&amp;list=PLC8FC40C714F5E60F&amp;index=1" data-reactid=".9jihtm016o.2.$arclength.7.1">Gauss quadrature</a><span data-reactid=".9jihtm016o.2.$arclength.7.2">. This approximation is a really neat trick, because for any </span><i data-reactid=".9jihtm016o.2.$arclength.7.3"><span data-reactid=".9jihtm016o.2.$arclength.7.3.0">n</span><sup data-reactid=".9jihtm016o.2.$arclength.7.3.1">th</sup></i><span data-reactid=".9jihtm016o.2.$arclength.7.4"> degree polynomial it finds approximated values for an integral really efficiently. Explaining this procedure in length is way beyond the scope of this page, so if you&#x27;re interested in finding out why it works, I can recommend the University of South Florida video lecture on the procedure, linked in this very paragraph. The general solution we&#x27;re looking for is the following:</span></p><p data-reactid=".9jihtm016o.2.$arclength.8"><img class="LaTeX SVG" src="images/latex/e6a8d7d5f1742bb926c0c992d2b89c71090edbf4.svg" style="width:37.800000000000004rem;height:5.175rem;" data-reactid=".9jihtm016o.2.$arclength.8.0"/></p><p data-reactid=".9jihtm016o.2.$arclength.9">In plain text: an integral function can always be treated as the sum of an (infinite) number of (infinitely thin) rectangular strips sitting &quot;under&quot; the function&#x27;s plotted graph. To illustrate this idea, the following graph shows the integral for a sinoid function. The more strips we use (and of course the more we use, the thinner they get) the closer we get to the true area under the curve, and thus the better the approximation:</p><div class="figure" data-reactid=".9jihtm016o.2.$arclength.a"><figure class="inline" data-reactid=".9jihtm016o.2.$arclength.a.0"><canvas tabindex="0" data-reactid=".9jihtm016o.2.$arclength.a.0.0"></canvas><figcaption data-reactid=".9jihtm016o.2.$arclength.a.0.1"><span data-reactid=".9jihtm016o.2.$arclength.a.0.1.0">A function&#x27;s approximated integral</span><span data-reactid=".9jihtm016o.2.$arclength.a.0.1.1"> </span></figcaption></figure><figure class="inline" data-reactid=".9jihtm016o.2.$arclength.a.1"><canvas tabindex="0" data-reactid=".9jihtm016o.2.$arclength.a.1.0"></canvas><figcaption data-reactid=".9jihtm016o.2.$arclength.a.1.1"><span data-reactid=".9jihtm016o.2.$arclength.a.1.1.0">A better approximation</span><span data-reactid=".9jihtm016o.2.$arclength.a.1.1.1"> </span></figcaption></figure><figure class="inline" data-reactid=".9jihtm016o.2.$arclength.a.2"><canvas tabindex="0" data-reactid=".9jihtm016o.2.$arclength.a.2.0"></canvas><figcaption data-reactid=".9jihtm016o.2.$arclength.a.2.1"><span data-reactid=".9jihtm016o.2.$arclength.a.2.1.0">An even better approximation</span><span data-reactid=".9jihtm016o.2.$arclength.a.2.1.1"> </span></figcaption></figure></div><p data-reactid=".9jihtm016o.2.$arclength.b">Now, infinitely many terms to sum and infinitely thin rectangles are not something that computers can work with, so instead we&#x27;re going to approximate the infinite summation by using a sum of a finite number of &quot;just thin&quot; rectangular strips. As long as we use a high enough number of thin enough rectangular strips, this will give us an approximation that is pretty close to what the real value is.</p><p data-reactid=".9jihtm016o.2.$arclength.c"><span data-reactid=".9jihtm016o.2.$arclength.c.0">So, the trick is to come up with useful rectangular strips. A naive way is to simply create </span><i data-reactid=".9jihtm016o.2.$arclength.c.1">n</i><span data-reactid=".9jihtm016o.2.$arclength.c.2"> strips, all with the same width, but there is a far better way using special values for </span><i data-reactid=".9jihtm016o.2.$arclength.c.3">C</i><span data-reactid=".9jihtm016o.2.$arclength.c.4"> and </span><i data-reactid=".9jihtm016o.2.$arclength.c.5">f(t)</i><span data-reactid=".9jihtm016o.2.$arclength.c.6"> depending on the value of </span><i data-reactid=".9jihtm016o.2.$arclength.c.7">n</i><span data-reactid=".9jihtm016o.2.$arclength.c.8">, which indicates how many strips we&#x27;ll use, and it&#x27;s called the Legendre-Gauss quadrature.</span></p><p data-reactid=".9jihtm016o.2.$arclength.d"><span data-reactid=".9jihtm016o.2.$arclength.d.0">This approach uses strips that are </span><em data-reactid=".9jihtm016o.2.$arclength.d.1">not</em><span data-reactid=".9jihtm016o.2.$arclength.d.2"> spaced evenly, but instead spaces them in a special way that works remarkably well. If you look at the earlier sinoid graphic, you could imagine that we could probably get a result similar to the one with 99 strips if we used fewer strips, but spaced them so that the steeper the curve is, the thinner we make the strip, and conversely, the flatter the curve is (especially near the tops of the function), the wider we make the strip. That&#x27;s akin to how the Legendre values work.</span></p><div class="note" data-reactid=".9jihtm016o.2.$arclength.e"><p data-reactid=".9jihtm016o.2.$arclength.e.0"><span data-reactid=".9jihtm016o.2.$arclength.e.0.0">Note that one requirement for the approach we&#x27;ll use is that the integral must run from -1 to 1. That&#x27;s no good, because we&#x27;re dealing with Bézier curves, and the length of a section of curve applies to values which run from 0 to &quot;some value smaller than or equal to 1&quot; (let&#x27;s call that value </span><i data-reactid=".9jihtm016o.2.$arclength.e.0.1">z</i><span data-reactid=".9jihtm016o.2.$arclength.e.0.2">). Thankfully, we can quite easily transform any integral interval to any other integral interval, by shifting and scaling the inputs. Doing so, we get the following:</span></p><p data-reactid=".9jihtm016o.2.$arclength.e.1"><img class="LaTeX SVG" src="images/latex/631e6396082d9621472546b87c2e27065990d568.svg" style="width:24.15015rem;height:5.92515rem;" data-reactid=".9jihtm016o.2.$arclength.e.1.0"/></p><p data-reactid=".9jihtm016o.2.$arclength.e.2"><span data-reactid=".9jihtm016o.2.$arclength.e.2.0">That may look a bit more complicated, but the fraction involving </span><i data-reactid=".9jihtm016o.2.$arclength.e.2.1">z</i><span data-reactid=".9jihtm016o.2.$arclength.e.2.2"> is a fixed number, so the summation, and the evaluation of the </span><i data-reactid=".9jihtm016o.2.$arclength.e.2.3">f(t)</i><span data-reactid=".9jihtm016o.2.$arclength.e.2.4"> values are still pretty simple.</span></p><p data-reactid=".9jihtm016o.2.$arclength.e.3"><span data-reactid=".9jihtm016o.2.$arclength.e.3.0">So, what do we need to perform this calculation? For one, we&#x27;ll need an explicit formula for </span><i data-reactid=".9jihtm016o.2.$arclength.e.3.1">f(t)</i><span data-reactid=".9jihtm016o.2.$arclength.e.3.2">, because that derivative notation is handy on paper, but not when we have to implement it. We&#x27;ll also need to know what these </span><i data-reactid=".9jihtm016o.2.$arclength.e.3.3"><span data-reactid=".9jihtm016o.2.$arclength.e.3.3.0">C</span><sub data-reactid=".9jihtm016o.2.$arclength.e.3.3.1">i</sub></i><span data-reactid=".9jihtm016o.2.$arclength.e.3.4"> and </span><i data-reactid=".9jihtm016o.2.$arclength.e.3.5"><span data-reactid=".9jihtm016o.2.$arclength.e.3.5.0">t</span><sub data-reactid=".9jihtm016o.2.$arclength.e.3.5.1">i</sub></i><span data-reactid=".9jihtm016o.2.$arclength.e.3.6"> values should be. Luckily, that&#x27;s less work because there are actually many tables available that give these values, for any </span><i data-reactid=".9jihtm016o.2.$arclength.e.3.7">n</i><span data-reactid=".9jihtm016o.2.$arclength.e.3.8">, so if we want to approximate our integral with only two terms (which is a bit low, really) then </span><a href="legendre-gauss.html" data-reactid=".9jihtm016o.2.$arclength.e.3.9">these tables</a><span data-reactid=".9jihtm016o.2.$arclength.e.3.a"> would tell us that for </span><i data-reactid=".9jihtm016o.2.$arclength.e.3.b">n=2</i><span data-reactid=".9jihtm016o.2.$arclength.e.3.c"> we must use the following values:</span></p><p data-reactid=".9jihtm016o.2.$arclength.e.4"><img class="LaTeX SVG" src="images/latex/6dc4299695f03c27c362e7faf47ae4474794809e.svg" style="width:4.80015rem;height:6.82515rem;" data-reactid=".9jihtm016o.2.$arclength.e.4.0"/></p><p data-reactid=".9jihtm016o.2.$arclength.e.5">Which means that in order for us to approximate the integral, we must plug these values into the approximate function, which gives us:</p><p data-reactid=".9jihtm016o.2.$arclength.e.6"><img class="LaTeX SVG" src="images/latex/fe54606651e308caf83a65e53bc4d6104f8a4ee1.svg" style="width:34.95015rem;height:3.15rem;" data-reactid=".9jihtm016o.2.$arclength.e.6.0"/></p><p data-reactid=".9jihtm016o.2.$arclength.e.7"><span data-reactid=".9jihtm016o.2.$arclength.e.7.0">We can program that pretty easily, provided we have that </span><i data-reactid=".9jihtm016o.2.$arclength.e.7.1">f(t)</i><span data-reactid=".9jihtm016o.2.$arclength.e.7.2"> available, which we do, as we know the full description for the Bézier curve functions B</span><sub data-reactid=".9jihtm016o.2.$arclength.e.7.3">x</sub><span data-reactid=".9jihtm016o.2.$arclength.e.7.4">(t) and B</span><sub data-reactid=".9jihtm016o.2.$arclength.e.7.5">y</sub><span data-reactid=".9jihtm016o.2.$arclength.e.7.6">(t).</span></p></div><p data-reactid=".9jihtm016o.2.$arclength.f"><span data-reactid=".9jihtm016o.2.$arclength.f.0">If we use the Legendre-Gauss values for our </span><i data-reactid=".9jihtm016o.2.$arclength.f.1">C</i><span data-reactid=".9jihtm016o.2.$arclength.f.2"> values (thickness for each strip) and </span><i data-reactid=".9jihtm016o.2.$arclength.f.3">t</i><span data-reactid=".9jihtm016o.2.$arclength.f.4"> values (location of each strip), we can determine the approximate length of a Bézier curve by computing the Legendre-Gauss sum. The following graphic shows a cubic curve, with its computed lengths; Go ahead and change the curve, to see how its length changes. One thing worth trying is to see if you can make a straight line, and see if the length matches what you&#x27;d expect. What if you form a line with the control points on the outside, and the start/end points on the inside?</span></p><figure class="false" data-reactid=".9jihtm016o.2.$arclength.g"><canvas tabindex="0" data-reactid=".9jihtm016o.2.$arclength.g.0"></canvas><figcaption data-reactid=".9jihtm016o.2.$arclength.g.1"><span data-reactid=".9jihtm016o.2.$arclength.g.1.0">Arc length for a Bézier curve</span><span data-reactid=".9jihtm016o.2.$arclength.g.1.1"> </span></figcaption></figure></section><table class="relatives after" data-reactid=".9jihtm016o.2.2"><tbody data-reactid=".9jihtm016o.2.2.0"><tr data-reactid=".9jihtm016o.2.2.0.0"><td data-reactid=".9jihtm016o.2.2.0.0.0"><a class="prev" href="canonical" data-reactid=".9jihtm016o.2.2.0.0.0.0">18. Canonical form (for cubic curves)</a></td><td class="toc" data-reactid=".9jihtm016o.2.2.0.0.1"><a class="" href="/" data-reactid=".9jihtm016o.2.2.0.0.1.0">ToC</a></td><td data-reactid=".9jihtm016o.2.2.0.0.2"><a class="next" href="arclengthapprox" data-reactid=".9jihtm016o.2.2.0.0.2.0">20. Approximated arc length</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".9jihtm016o.3"><span data-reactid=".9jihtm016o.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".9jihtm016o.3.1">almost no rights reserved</a><span data-reactid=".9jihtm016o.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>