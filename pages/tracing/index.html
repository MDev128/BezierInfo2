<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Tracing a curve at fixed distance intervals
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".gfaxubbnr4" data-react-checksum="955904226"><div class="ribbon" data-reactid=".gfaxubbnr4.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".gfaxubbnr4.0.0"/><map name="githubmap" data-reactid=".gfaxubbnr4.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".gfaxubbnr4.0.1.0"/></map></div><header data-reactid=".gfaxubbnr4.1"><h1 data-reactid=".gfaxubbnr4.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".gfaxubbnr4.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".gfaxubbnr4.2"><table class="relatives before" data-reactid=".gfaxubbnr4.2.0"><tbody data-reactid=".gfaxubbnr4.2.0.0"><tr data-reactid=".gfaxubbnr4.2.0.0.0"><td data-reactid=".gfaxubbnr4.2.0.0.0.0"><a class="prev" href="arclengthapprox" data-reactid=".gfaxubbnr4.2.0.0.0.0.0">20. Approximated arc length</a></td><td class="toc" data-reactid=".gfaxubbnr4.2.0.0.0.1"><a class="" href="/" data-reactid=".gfaxubbnr4.2.0.0.0.1.0">ToC</a></td><td data-reactid=".gfaxubbnr4.2.0.0.0.2"><a class="next" href="intersections" data-reactid=".gfaxubbnr4.2.0.0.0.2.0">22. Intersections</a></td></tr></tbody></table><section data-reactid=".gfaxubbnr4.2.$tracing"><h2 data-num="21" data-reactid=".gfaxubbnr4.2.$tracing.0"><a href="#tracing" data-reactid=".gfaxubbnr4.2.$tracing.0.0">Tracing a curve at fixed distance intervals</a></h2><p data-reactid=".gfaxubbnr4.2.$tracing.1">Say you want to draw a curve with a dashed line, rather than a solid line, or you want to move something along the curve at fixed distance intervals over time, like a train along a track, and you want to use Bézier curves.</p><p data-reactid=".gfaxubbnr4.2.$tracing.2">Now you have a problem.</p><p data-reactid=".gfaxubbnr4.2.$tracing.3"><span data-reactid=".gfaxubbnr4.2.$tracing.3.0">The reason you have a problem is that Bézier curves are parametric functions with non-linear behaviour, whereas moving a train along a track is about as close to a practical example of linear behaviour as you can get. The problem we&#x27;re faced with is that we can&#x27;t just pick </span><i data-reactid=".gfaxubbnr4.2.$tracing.3.1">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.3.2"> values at some fixed interval and expect the Bézier functions to generate points that are spaced a fixed distance apart. In fact, let&#x27;s look at the relation between &quot;distance long a curve&quot; and &quot;</span><i data-reactid=".gfaxubbnr4.2.$tracing.3.3">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.3.4"> value&quot;, by plotting them against one another.</span></p><p data-reactid=".gfaxubbnr4.2.$tracing.4"><span data-reactid=".gfaxubbnr4.2.$tracing.4.0">The following graphic shows a particularly illustrative curve, and it&#x27;s length-to-t plot. For linear traversal, this line needs to be straight, running from (0,0) to (length,1). This is, it&#x27;s safe to say, not what we&#x27;ll see, we&#x27;ll see something wobbly instead. To make matters even worse, the length-to-</span><i data-reactid=".gfaxubbnr4.2.$tracing.4.1">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.4.2"> function is also of a much higher order than our curve is: while the curve we&#x27;re using for this exercise is a cubic curve, which can switch concave/convex form once at best, the plot shows that the distance function along the curve is able to switch forms three times (to see this, try creating an S curve with the start/end close together, but the control points far apart).</span></p><figure class="false" data-reactid=".gfaxubbnr4.2.$tracing.5"><canvas tabindex="0" data-reactid=".gfaxubbnr4.2.$tracing.5.0"></canvas><figcaption data-reactid=".gfaxubbnr4.2.$tracing.5.1"><span data-reactid=".gfaxubbnr4.2.$tracing.5.1.0">The t-for-distance function</span><span data-reactid=".gfaxubbnr4.2.$tracing.5.1.1"> </span></figcaption></figure><p data-reactid=".gfaxubbnr4.2.$tracing.6"><span data-reactid=".gfaxubbnr4.2.$tracing.6.0">We see a function that might be invertible, but we won&#x27;t be able to do so, symbolically. You may remember from the section on arc length that we cannot actually compute the true arc length function as an expression of </span><i data-reactid=".gfaxubbnr4.2.$tracing.6.1">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.6.2">, which means we also can&#x27;t compute the true inverted function that gives </span><i data-reactid=".gfaxubbnr4.2.$tracing.6.3">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.6.4"> as an expression of length. So how do we fix this?</span></p><p data-reactid=".gfaxubbnr4.2.$tracing.7"><span data-reactid=".gfaxubbnr4.2.$tracing.7.0">One way is to do what the graphic does: simply run through the curve, determine its</span><i data-reactid=".gfaxubbnr4.2.$tracing.7.1">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.7.2">-for-length values as a set of discrete values at some high resolution (the graphic uses 100 discrete points), and then use those as a basis for finding an appropriate </span><i data-reactid=".gfaxubbnr4.2.$tracing.7.3">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.7.4"> value, given a distance along the curve. This works quite well, actually, and is fairly fast.</span></p><p data-reactid=".gfaxubbnr4.2.$tracing.8"><span data-reactid=".gfaxubbnr4.2.$tracing.8.0">We can use some colour to show the difference between distance-based and time based intervals: the following graph is similar to the previous one, except it segments the curve in terms of equal-distance intervals. This shows as regular colour intervals going down the graph, but the mapping to </span><i data-reactid=".gfaxubbnr4.2.$tracing.8.1">t</i><span data-reactid=".gfaxubbnr4.2.$tracing.8.2"> values is not linear, so there will be (highly) irregular intervals along the horizontal axis. It also shows the curve in an alternating colouring based on the t-for-distance values we find our LUT:</span></p><figure class="false" data-reactid=".gfaxubbnr4.2.$tracing.9"><canvas tabindex="0" data-reactid=".gfaxubbnr4.2.$tracing.9.0"></canvas><figcaption data-reactid=".gfaxubbnr4.2.$tracing.9.1"><span data-reactid=".gfaxubbnr4.2.$tracing.9.1.0">Fixed-interval coloring a curve</span><span data-reactid=".gfaxubbnr4.2.$tracing.9.1.1"> </span></figcaption></figure><p data-reactid=".gfaxubbnr4.2.$tracing.a">Use your up and down arrow keys to increase or decrease the number of equidistant segments used to colour the curve.</p><p data-reactid=".gfaxubbnr4.2.$tracing.b"><span data-reactid=".gfaxubbnr4.2.$tracing.b.0">However, are there better ways? One such way is discussed in &quot;</span><a href="http://www.geometrictools.com/Documentation/MovingAlongCurveSpecifiedSpeed.pdf" data-reactid=".gfaxubbnr4.2.$tracing.b.1">Moving Along a Curve with Specified Speed</a><span data-reactid=".gfaxubbnr4.2.$tracing.b.2">&quot; by David Eberly of Geometric Tools, LLC, but basically because we have no explicit length function (or rather, one we don&#x27;t have to constantly compute for different intervals), you may simply be better off with a traditional lookup table (LUT).</span></p></section><table class="relatives after" data-reactid=".gfaxubbnr4.2.2"><tbody data-reactid=".gfaxubbnr4.2.2.0"><tr data-reactid=".gfaxubbnr4.2.2.0.0"><td data-reactid=".gfaxubbnr4.2.2.0.0.0"><a class="prev" href="arclengthapprox" data-reactid=".gfaxubbnr4.2.2.0.0.0.0">20. Approximated arc length</a></td><td class="toc" data-reactid=".gfaxubbnr4.2.2.0.0.1"><a class="" href="/" data-reactid=".gfaxubbnr4.2.2.0.0.1.0">ToC</a></td><td data-reactid=".gfaxubbnr4.2.2.0.0.2"><a class="next" href="intersections" data-reactid=".gfaxubbnr4.2.2.0.0.2.0">22. Intersections</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".gfaxubbnr4.3"><span data-reactid=".gfaxubbnr4.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".gfaxubbnr4.3.1">almost no rights reserved</a><span data-reactid=".gfaxubbnr4.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>