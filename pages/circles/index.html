<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Circles and quadratic Bézier curves
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".16d7vrlf6kg" data-react-checksum="810320441"><div class="ribbon" data-reactid=".16d7vrlf6kg.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".16d7vrlf6kg.0.0"/><map name="githubmap" data-reactid=".16d7vrlf6kg.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".16d7vrlf6kg.0.1.0"/></map></div><header data-reactid=".16d7vrlf6kg.1"><h1 data-reactid=".16d7vrlf6kg.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".16d7vrlf6kg.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".16d7vrlf6kg.2"><table class="relatives before" data-reactid=".16d7vrlf6kg.2.0"><tbody data-reactid=".16d7vrlf6kg.2.0.0"><tr data-reactid=".16d7vrlf6kg.2.0.0.0"><td data-reactid=".16d7vrlf6kg.2.0.0.0.0"><a class="prev" href="graduatedoffset" data-reactid=".16d7vrlf6kg.2.0.0.0.0.0">33. Graduated curve offsetting</a></td><td class="toc" data-reactid=".16d7vrlf6kg.2.0.0.0.1"><a class="" href="/" data-reactid=".16d7vrlf6kg.2.0.0.0.1.0">ToC</a></td><td data-reactid=".16d7vrlf6kg.2.0.0.0.2"><a class="next" href="circles_cubic" data-reactid=".16d7vrlf6kg.2.0.0.0.2.0">35. Circles and cubic Bézier curves</a></td></tr></tbody></table><section data-reactid=".16d7vrlf6kg.2.$circles"><h2 data-num="34" data-reactid=".16d7vrlf6kg.2.$circles.0"><a href="#circles" data-reactid=".16d7vrlf6kg.2.$circles.0.0">Circles and quadratic Bézier curves</a></h2><p data-reactid=".16d7vrlf6kg.2.$circles.1">Circles and Bézier curves are very different beasts, and circles are infinitely easier to work with than Bézier curves. Their formula is much simpler, and they can be drawn more efficiently. But, sometimes you don&#x27;t have the luxury of using circles, or ellipses, or arcs. Sometimes, all you have are Bézier curves. For instance, if you&#x27;re doing font design, fonts have no concept of geometric shapes, they only know straight lines, and Bézier curves. OpenType fonts with TrueType outlines only know quadratic Bézier curves, and OpenType fonts with Type 2 outlines only know cubic Bézier curves. So how do you draw a circle, or an ellipse, or an arc?</p><p data-reactid=".16d7vrlf6kg.2.$circles.2">You approximate.</p><p data-reactid=".16d7vrlf6kg.2.$circles.3">We already know that Bézier curves cannot model all curves that we can think of, and this includes perfect circles, as well as ellipses, and their arc counterparts. However, we can certainly approximate them to a degree that is visually acceptable. Quadratic and cubic curves offer us different curvature control, so in order to approximate a circle we will first need to figure out what the error is if we try to approximate arcs of increasing degree with quadratic and cubic curves, and where the coordinates even lie.</p><p data-reactid=".16d7vrlf6kg.2.$circles.4">Since arcs are mid-point-symmetrical, we need the control points to set up a symmetrical curve. For quadratic curves this means that the control point will be somewhere on a line that intersects the baseline at a right angle. And we don&#x27;t get any choice on where that will be, since the derivatives at the start and end point have to line up, so our control point will lie at the intersection of the tangents at the start and end point.</p><p data-reactid=".16d7vrlf6kg.2.$circles.5">First, let&#x27;s try to fit the quadratic curve onto a circular arc. In the following sketch you can move the mouse around over a unit circle, to see how well, or poorly, a quadratic curve can approximate the arc from (1,0) to where your mouse cursor is:</p><figure class="false" data-reactid=".16d7vrlf6kg.2.$circles.6"><canvas tabindex="0" data-reactid=".16d7vrlf6kg.2.$circles.6.0"></canvas><figcaption data-reactid=".16d7vrlf6kg.2.$circles.6.1"><span data-reactid=".16d7vrlf6kg.2.$circles.6.1.0">Quadratic Bézier arc approximation</span><span data-reactid=".16d7vrlf6kg.2.$circles.6.1.1"> </span></figcaption></figure><p data-reactid=".16d7vrlf6kg.2.$circles.7">As you can see, things go horribly wrong quite quickly; even trying to approximate a quarter circle using a quadratic curve is a bad idea. An eighth of a turns might look okay, but how okay is okay? Let&#x27;s apply some maths and find out. What we&#x27;re interested in is how far off our on-curve coordinates are with respect to a circular arc, given a specific start and end angle. We&#x27;ll be looking at how much space there is between the circular arc, and the quadratic curve&#x27;s midpoint.</p><p data-reactid=".16d7vrlf6kg.2.$circles.8"><span data-reactid=".16d7vrlf6kg.2.$circles.8.0">We start out with our start and end point, and for convenience we will place them on a unit circle (a circle around 0,0 with radius 1), at some angle </span><i data-reactid=".16d7vrlf6kg.2.$circles.8.1">φ</i><span data-reactid=".16d7vrlf6kg.2.$circles.8.2">:</span></p><p data-reactid=".16d7vrlf6kg.2.$circles.9"><img class="LaTeX SVG" src="images/latex/ef34ab8f466ed3294895135a346b55ada05d779d.svg" style="width:13.275rem;height:2.6248500000000003rem;" data-reactid=".16d7vrlf6kg.2.$circles.9.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.a">What we want to find is the intersection of the tangents, so we want a point C such that:</p><p data-reactid=".16d7vrlf6kg.2.$circles.b"><img class="LaTeX SVG" src="images/latex/5660e8512b07dbac7fcf04633de8002fa25aa962.svg" style="width:20.77515rem;height:2.6248500000000003rem;" data-reactid=".16d7vrlf6kg.2.$circles.b.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.c"><span data-reactid=".16d7vrlf6kg.2.$circles.c.0">i.e. we want a point that lies on the vertical line through A (at some distance </span><i data-reactid=".16d7vrlf6kg.2.$circles.c.1">a</i><span data-reactid=".16d7vrlf6kg.2.$circles.c.2">from A) and also lies on the tangent line through B (at some distance </span><i data-reactid=".16d7vrlf6kg.2.$circles.c.3">b</i><span data-reactid=".16d7vrlf6kg.2.$circles.c.4"> from B). Solving this gives us:</span></p><p data-reactid=".16d7vrlf6kg.2.$circles.d"><img class="LaTeX SVG" src="images/latex/d16e7a1c1e9686e1afb82f4ffcec07078d264565.svg" style="width:14.99985rem;height:2.7rem;" data-reactid=".16d7vrlf6kg.2.$circles.d.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.e"><span data-reactid=".16d7vrlf6kg.2.$circles.e.0">First we solve for </span><i data-reactid=".16d7vrlf6kg.2.$circles.e.1">b</i><span data-reactid=".16d7vrlf6kg.2.$circles.e.2">:</span></p><p data-reactid=".16d7vrlf6kg.2.$circles.f"><img class="LaTeX SVG" src="images/latex/3128b31a874166ebe4479d3002d70f280de375a1.svg" style="width:39.07485rem;height:1.125rem;" data-reactid=".16d7vrlf6kg.2.$circles.f.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.g">which yields:</p><p data-reactid=".16d7vrlf6kg.2.$circles.h"><img class="LaTeX SVG" src="images/latex/02b158f9ef2191b970dc2fe69c0903eba2b1f8b5.svg" style="width:6.9750000000000005rem;height:2.7rem;" data-reactid=".16d7vrlf6kg.2.$circles.h.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.i"><span data-reactid=".16d7vrlf6kg.2.$circles.i.0">which we can then substitute in the expression for </span><i data-reactid=".16d7vrlf6kg.2.$circles.i.1">a</i><span data-reactid=".16d7vrlf6kg.2.$circles.i.2">:</span></p><p data-reactid=".16d7vrlf6kg.2.$circles.j"><img class="LaTeX SVG" src="images/latex/e940f26afcd5f80371b6b72a8f52e217da64721d.svg" style="width:16.50015rem;height:13.275rem;" data-reactid=".16d7vrlf6kg.2.$circles.j.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.k"><span data-reactid=".16d7vrlf6kg.2.$circles.k.0">A quick check shows that plugging these values for </span><i data-reactid=".16d7vrlf6kg.2.$circles.k.1">a</i><span data-reactid=".16d7vrlf6kg.2.$circles.k.2"> and </span><i data-reactid=".16d7vrlf6kg.2.$circles.k.3">b</i><span data-reactid=".16d7vrlf6kg.2.$circles.k.4"> into the expressions for C</span><sub data-reactid=".16d7vrlf6kg.2.$circles.k.5">x</sub><span data-reactid=".16d7vrlf6kg.2.$circles.k.6"> and C</span><sub data-reactid=".16d7vrlf6kg.2.$circles.k.7">y</sub><span data-reactid=".16d7vrlf6kg.2.$circles.k.8"> give the same x/y coordinates for both &quot;</span><i data-reactid=".16d7vrlf6kg.2.$circles.k.9">a</i><span data-reactid=".16d7vrlf6kg.2.$circles.k.a"> away from A&quot; and &quot;</span><i data-reactid=".16d7vrlf6kg.2.$circles.k.b">b</i><span data-reactid=".16d7vrlf6kg.2.$circles.k.c"> away from B&quot;, so let&#x27;s continue: now that we know the coordinate values for C, we know where our on-curve point T for </span><i data-reactid=".16d7vrlf6kg.2.$circles.k.d">t=0.5</i><span data-reactid=".16d7vrlf6kg.2.$circles.k.e"> (or angle φ/2) is, because we can just evaluate the Bézier polynomial, and we know where the circle arc&#x27;s actual point P is for angle φ/2:</span></p><p data-reactid=".16d7vrlf6kg.2.$circles.l"><img class="LaTeX SVG" src="images/latex/0b80423188012451e0400f473c19729eb2bad654.svg" style="width:13.350150000000001rem;height:2.025rem;" data-reactid=".16d7vrlf6kg.2.$circles.l.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.m"><span data-reactid=".16d7vrlf6kg.2.$circles.m.0">We compute T, observing that if </span><i data-reactid=".16d7vrlf6kg.2.$circles.m.1">t=0.5</i><span data-reactid=".16d7vrlf6kg.2.$circles.m.2">, the polynomial values (1-t)², 2(1-t)t, and t² are 0.25, 0.5, and 0.25 respectively:</span></p><p data-reactid=".16d7vrlf6kg.2.$circles.n"><img class="LaTeX SVG" src="images/latex/bc50559ff8bd9062694a449aae5f6f85f91de909.svg" style="width:18.225rem;height:2.17485rem;" data-reactid=".16d7vrlf6kg.2.$circles.n.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.o">Which, worked out for the x and y components, gives:</p><p data-reactid=".16d7vrlf6kg.2.$circles.p"><img class="LaTeX SVG" src="images/latex/6e512d83529089b2294b45659b826bb24a598356.svg" style="width:29.025000000000002rem;height:5.175rem;" data-reactid=".16d7vrlf6kg.2.$circles.p.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.q">And the distance between these two is the standard Euclidean distance:</p><p data-reactid=".16d7vrlf6kg.2.$circles.r"><img class="LaTeX SVG" src="images/latex/d13ad085587983ba3fa6fe9051dcc2f6a3d0917c.svg" style="width:27.675rem;height:9.525150000000002rem;" data-reactid=".16d7vrlf6kg.2.$circles.r.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.s">So, what does this distance function look like when we plot it for a number of ranges for the angle φ, such as a half circle, quarter circle and eighth circle?</p><table data-reactid=".16d7vrlf6kg.2.$circles.t"><tbody data-reactid=".16d7vrlf6kg.2.$circles.t.0"><tr data-reactid=".16d7vrlf6kg.2.$circles.t.0.0"><td data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.0"><p data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.0.0"><img src="images/arc-q-pi.gif" data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.0.0.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.0.1">plotted for 0 ≤ φ ≤ π:</p></td><td data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.1"><p data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.1.0"><img src="images/arc-q-pi2.gif" data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.1.0.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.1.1">plotted for 0 ≤ φ ≤ ½π:</p></td><td data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.2"><p data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.2.1"><img src="images/arc-q-pi4.gif" data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.2.1.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.t.0.0.2.2">plotted for 0 ≤ φ ≤ ¼π:</p></td></tr></tbody></table><p data-reactid=".16d7vrlf6kg.2.$circles.u"><span data-reactid=".16d7vrlf6kg.2.$circles.u.0">We now see why the eighth circle arc looks decent, but the quarter circle arc doesn&#x27;t: an error of roughly 0.06 at </span><i data-reactid=".16d7vrlf6kg.2.$circles.u.1">t=0.5</i><span data-reactid=".16d7vrlf6kg.2.$circles.u.2"> means we&#x27;re 6% off the mark... we will already be off by one pixel on a circle with pixel radius 17. Any decent sized quarter circle arc, say with radius 100px, will be way off if approximated by a quadratic curve! For the eighth circle arc, however, the error is only roughly 0.003, or 0.3%, which explains why it looks so close to the actual eighth circle arc. In fact, if we want a truly tiny error, like 0.001, we&#x27;ll have to contend with an angle of (rounded) 0.593667, which equates to roughly 34 degrees. We&#x27;d need 11 quadratic curves to form a full circle with that precision! (technically, 10 and ten seventeenth, but we can&#x27;t do partial curves, so we have to round up). That&#x27;s a whole lot of curves just to get a shape that can be drawn using a simple function!</span></p><p data-reactid=".16d7vrlf6kg.2.$circles.v">In fact, let&#x27;s flip the function around, so that if we plug in the precision error, labelled ε, we get back the maximum angle for that precision:</p><p data-reactid=".16d7vrlf6kg.2.$circles.w"><img class="LaTeX SVG" src="images/latex/61a938fa10b77e8c41c3c064ed39bd1145d6bbcc.svg" style="width:18.225rem;height:4.5rem;" data-reactid=".16d7vrlf6kg.2.$circles.w.0"/></p><p data-reactid=".16d7vrlf6kg.2.$circles.x">And frankly, things are starting to look a bit ridiculous at this point, we&#x27;re doing way more maths than we&#x27;ve ever done, but thankfully this is as far as we need the maths to take us: If we plug in the precisions 0.1, 0.01, 0.001 and 0.0001 we get the radians values 1.748, 1.038, 0.594 and 0.3356; in degrees, that means we can cover roughly 100 degrees (requiring four curves), 59.5 degrees (requiring six curves), 34 degrees (requiring 11 curves), and 19.2 degrees (requiring a whopping nineteen curves). </p><p data-reactid=".16d7vrlf6kg.2.$circles.y"><span data-reactid=".16d7vrlf6kg.2.$circles.y.0">The bottom line? </span><strong data-reactid=".16d7vrlf6kg.2.$circles.y.1">Quadratic curves are kind of lousy</strong><span data-reactid=".16d7vrlf6kg.2.$circles.y.2"> if you want circular (or elliptical, which are circles that have been squashed in one dimension) curves. We can do better, even if it&#x27;s just by raising the order of our curve once. So let&#x27;s try the same thing for cubic curves.</span></p></section><table class="relatives after" data-reactid=".16d7vrlf6kg.2.2"><tbody data-reactid=".16d7vrlf6kg.2.2.0"><tr data-reactid=".16d7vrlf6kg.2.2.0.0"><td data-reactid=".16d7vrlf6kg.2.2.0.0.0"><a class="prev" href="graduatedoffset" data-reactid=".16d7vrlf6kg.2.2.0.0.0.0">33. Graduated curve offsetting</a></td><td class="toc" data-reactid=".16d7vrlf6kg.2.2.0.0.1"><a class="" href="/" data-reactid=".16d7vrlf6kg.2.2.0.0.1.0">ToC</a></td><td data-reactid=".16d7vrlf6kg.2.2.0.0.2"><a class="next" href="circles_cubic" data-reactid=".16d7vrlf6kg.2.2.0.0.2.0">35. Circles and cubic Bézier curves</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".16d7vrlf6kg.3"><span data-reactid=".16d7vrlf6kg.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".16d7vrlf6kg.3.1">almost no rights reserved</a><span data-reactid=".16d7vrlf6kg.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>