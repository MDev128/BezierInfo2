<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Derivatives
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".ftscu3widc" data-react-checksum="114775839"><div class="ribbon" data-reactid=".ftscu3widc.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".ftscu3widc.0.0"/><map name="githubmap" data-reactid=".ftscu3widc.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".ftscu3widc.0.1.0"/></map></div><header data-reactid=".ftscu3widc.1"><h1 data-reactid=".ftscu3widc.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".ftscu3widc.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".ftscu3widc.2"><table class="relatives before" data-reactid=".ftscu3widc.2.0"><tbody data-reactid=".ftscu3widc.2.0.0"><tr data-reactid=".ftscu3widc.2.0.0.0"><td data-reactid=".ftscu3widc.2.0.0.0.0"><a class="prev" href="reordering" data-reactid=".ftscu3widc.2.0.0.0.0.0">10. Lowering and elevating curve order</a></td><td class="toc" data-reactid=".ftscu3widc.2.0.0.0.1"><a class="" href="/" data-reactid=".ftscu3widc.2.0.0.0.1.0">ToC</a></td><td data-reactid=".ftscu3widc.2.0.0.0.2"><a class="next" href="pointvectors" data-reactid=".ftscu3widc.2.0.0.0.2.0">12. Tangents and normals</a></td></tr></tbody></table><section data-reactid=".ftscu3widc.2.$derivatives"><h2 data-num="11" data-reactid=".ftscu3widc.2.$derivatives.0"><a href="#derivatives" data-reactid=".ftscu3widc.2.$derivatives.0.0">Derivatives</a></h2><p data-reactid=".ftscu3widc.2.$derivatives.1">There&#x27;s a number of useful things that you can do with Bézier curves based on their derivative, and one of the more amusing observations about Bézier curves is that their derivatives are, in fact, also Bézier curves. In fact, the derivation of a Bézier curve is relatively straight forward, although we do need a bit of math. First, let&#x27;s look at the derivative rule for Bézier curves, which is:</p><p data-reactid=".ftscu3widc.2.$derivatives.2"><img class="LaTeX SVG" src="images/latex/ff6d9fc6f1697ca0b1e599a4e8ce43f9bd1f17da.svg" style="width:23.09985rem;height:3.15rem;" data-reactid=".ftscu3widc.2.$derivatives.2.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.3"><span data-reactid=".ftscu3widc.2.$derivatives.3.0">which we can also write (observing that </span><i data-reactid=".ftscu3widc.2.$derivatives.3.1">b</i><span data-reactid=".ftscu3widc.2.$derivatives.3.2"> in this formula is the same as our </span><i data-reactid=".ftscu3widc.2.$derivatives.3.3">w</i><span data-reactid=".ftscu3widc.2.$derivatives.3.4"> weights, and that </span><i data-reactid=".ftscu3widc.2.$derivatives.3.5">n</i><span data-reactid=".ftscu3widc.2.$derivatives.3.6"> times a summation is the same as a summation where each term is multiplied by </span><i data-reactid=".ftscu3widc.2.$derivatives.3.7">n</i><span data-reactid=".ftscu3widc.2.$derivatives.3.8">) as:</span></p><p data-reactid=".ftscu3widc.2.$derivatives.4"><img class="LaTeX SVG" src="images/latex/3437e732e8a61ec6badcfe292b6258f6ea6535c9.svg" style="width:23.85rem;height:3.15rem;" data-reactid=".ftscu3widc.2.$derivatives.4.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.5"><span data-reactid=".ftscu3widc.2.$derivatives.5.0">Or, in plain text: the derivative of an n</span><sup data-reactid=".ftscu3widc.2.$derivatives.5.1">th</sup><span data-reactid=".ftscu3widc.2.$derivatives.5.2"> degree Bézier curve is an (n-1)</span><sup data-reactid=".ftscu3widc.2.$derivatives.5.3">th</sup><span data-reactid=".ftscu3widc.2.$derivatives.5.4">degree Bézier curve, with one fewer term, and new weights w&#x27;</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.5">0</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.6">...w&#x27;</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.7">n-1</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.8"> derived from the original weights as n(w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.9">i+1</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.a"> - w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.b">i</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.c">), so for a 3rd degree curve, with four weights, the derivative has three new weights w&#x27;</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.d">0</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.e"> = 3(w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.f">1</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.g">-w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.h">0</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.i">), w&#x27;</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.j">1</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.k"> = 3(w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.l">2</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.m">-w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.n">1</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.o">) and w&#x27;</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.p">2</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.q"> = 3(w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.r">3</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.s">-w</span><sub data-reactid=".ftscu3widc.2.$derivatives.5.t">2</sub><span data-reactid=".ftscu3widc.2.$derivatives.5.u">).</span></p><div class="note" data-reactid=".ftscu3widc.2.$derivatives.6"><h3 data-reactid=".ftscu3widc.2.$derivatives.6.0">&quot;Slow down, why is that true?&quot;</h3><p data-reactid=".ftscu3widc.2.$derivatives.6.1">Sometimes just being told &quot;this is the derivative&quot; is nice, but you might want to see why this is indeed the case. As such, let&#x27;s have a look at the proof for this derivative. First off, the weights are independent of the full Bézier function, so the derivative involves only the derivative of the polynomial basis function. So, let&#x27;s find that:</p><p data-reactid=".ftscu3widc.2.$derivatives.6.2"><img class="LaTeX SVG" src="images/latex/1f8148ecaac6af494a8bb96d2f96f7a96f85d9e0.svg" style="width:14.625rem;height:2.32515rem;" data-reactid=".ftscu3widc.2.$derivatives.6.2.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.3"><span data-reactid=".ftscu3widc.2.$derivatives.6.3.0">Applying the </span><a href="http://en.wikipedia.org/wiki/Product_rule" data-reactid=".ftscu3widc.2.$derivatives.6.3.1">product</a><span data-reactid=".ftscu3widc.2.$derivatives.6.3.2"> and</span><a href="http://en.wikipedia.org/wiki/Chain_rule" data-reactid=".ftscu3widc.2.$derivatives.6.3.3">chain</a><span data-reactid=".ftscu3widc.2.$derivatives.6.3.4"> rules gives us:</span></p><p data-reactid=".ftscu3widc.2.$derivatives.6.4"><img class="LaTeX SVG" src="images/latex/02ecde09cea052e99e92b062e70cd724467f0e38.svg" style="width:28.425150000000002rem;height:1.27485rem;" data-reactid=".ftscu3widc.2.$derivatives.6.4.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.5">Which is hard to work with, so let&#x27;s expand that properly:</p><p data-reactid=".ftscu3widc.2.$derivatives.6.6"><img class="LaTeX SVG" src="images/latex/c67d5c6165c04b4bba3e9c8f7b8362300153d00d.svg" style="width:24.075rem;height:1.94985rem;" data-reactid=".ftscu3widc.2.$derivatives.6.6.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.7"><span data-reactid=".ftscu3widc.2.$derivatives.6.7.0">Now, the trick is to turn this expression into something that has binomial coefficients again, so we want to end up with things that look like &quot;x! over y!(x-y)!&quot;. If we can do that in a way that involves terms of </span><i data-reactid=".ftscu3widc.2.$derivatives.6.7.1">n-1</i><span data-reactid=".ftscu3widc.2.$derivatives.6.7.2"> and </span><i data-reactid=".ftscu3widc.2.$derivatives.6.7.3">k-1</i><span data-reactid=".ftscu3widc.2.$derivatives.6.7.4">, we&#x27;ll be on the right track.</span></p><p data-reactid=".ftscu3widc.2.$derivatives.6.8"><img class="LaTeX SVG" src="images/latex/cf675f8434c96397a548f91aae8150d99d8587a2.svg" style="width:36.525150000000004rem;height:6.60015rem;" data-reactid=".ftscu3widc.2.$derivatives.6.8.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.9">And that&#x27;s the first part done: the two components inside the parentheses are actually regular, lower order Bezier expressions:</p><p data-reactid=".ftscu3widc.2.$derivatives.6.a"><img class="LaTeX SVG" src="images/latex/33bbfd279ee71b319a9a93598607c687b00636af.svg" style="width:37.42515rem;height:3.6rem;" data-reactid=".ftscu3widc.2.$derivatives.6.a.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.b">Now to apply this to our weighted Bezier curves. We&#x27;ll write out the plain curve formula that we saw earlier, and then work our way through to its derivative:</p><p data-reactid=".ftscu3widc.2.$derivatives.6.c"><img class="LaTeX SVG" src="images/latex/88bc44a562fcdfb6b263970c252d149d7b473a39.svg" style="width:36.14985rem;height:9.225rem;" data-reactid=".ftscu3widc.2.$derivatives.6.c.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.d"><span data-reactid=".ftscu3widc.2.$derivatives.6.d.0">If we expand this (with some color to show how terms line up), and reorder the terms by increasing values for </span><i data-reactid=".ftscu3widc.2.$derivatives.6.d.1">k</i><span data-reactid=".ftscu3widc.2.$derivatives.6.d.2">we see the following:</span></p><p data-reactid=".ftscu3widc.2.$derivatives.6.e"><img class="LaTeX SVG" src="images/latex/833a6e9be84cd27fdaff1a7a3757411f8a356c95.svg" style="width:20.62485rem;height:8.850150000000001rem;" data-reactid=".ftscu3widc.2.$derivatives.6.e.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.f"><span data-reactid=".ftscu3widc.2.$derivatives.6.f.0">Two of these terms fall way: the first term falls away because there is no -1</span><sup data-reactid=".ftscu3widc.2.$derivatives.6.f.1">st</sup><span data-reactid=".ftscu3widc.2.$derivatives.6.f.2"> term in a summation. As such, it always contributes &quot;nothing&quot;, so we can safely completely ignore it for the purpose of finding the derivative function. The other term is the very last term in this expansion: one involving </span><i data-reactid=".ftscu3widc.2.$derivatives.6.f.3"><span data-reactid=".ftscu3widc.2.$derivatives.6.f.3.0">B</span><sub data-reactid=".ftscu3widc.2.$derivatives.6.f.3.1">n-1,n</sub></i><span data-reactid=".ftscu3widc.2.$derivatives.6.f.4">. This term would have a binomial coefficient of [</span><i data-reactid=".ftscu3widc.2.$derivatives.6.f.5">i</i><span data-reactid=".ftscu3widc.2.$derivatives.6.f.6"> choose </span><i data-reactid=".ftscu3widc.2.$derivatives.6.f.7">i+1</i><span data-reactid=".ftscu3widc.2.$derivatives.6.f.8">], which is a non-existent binomial coefficient. Again, this term would contribute &quot;nothing&quot;, so we can ignore it, too. This means we&#x27;re left with:</span></p><p data-reactid=".ftscu3widc.2.$derivatives.6.g"><img class="LaTeX SVG" src="images/latex/eac65797eafbe2732babcfc335733cbdf363693a.svg" style="width:20.39985rem;height:5.77485rem;" data-reactid=".ftscu3widc.2.$derivatives.6.g.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.h">And that&#x27;s just a summation of lower order curves:</p><p data-reactid=".ftscu3widc.2.$derivatives.6.i"><img class="LaTeX SVG" src="images/latex/7cfbe72b898fcbf054564e8b0813acb0e5d7c26d.svg" style="width:48.15rem;height:2.25rem;" data-reactid=".ftscu3widc.2.$derivatives.6.i.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.6.j">We can rewrite this as a normal summation, and we&#x27;re done:</p><p data-reactid=".ftscu3widc.2.$derivatives.6.k"><img class="LaTeX SVG" src="images/latex/418b48749012978b0f3e58cbb56c1049b977270e.svg" style="width:36.525150000000004rem;height:3.67515rem;" data-reactid=".ftscu3widc.2.$derivatives.6.k.0"/></p></div><p data-reactid=".ftscu3widc.2.$derivatives.7">Let&#x27;s rewrite that in a form similar to our original formula, so we can see the difference. We will first list our original formula for Bézier curves, and then the derivative:</p><p data-reactid=".ftscu3widc.2.$derivatives.8"><img class="LaTeX SVG" src="images/latex/b98618f8061e9e58289abccc06a624a14561d40f.svg" style="width:23.70015rem;height:3.90015rem;" data-reactid=".ftscu3widc.2.$derivatives.8.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.9"><img class="LaTeX SVG" src="images/latex/52947a49ac9e3a189ed56b89a018eff6288435f5.svg" style="width:36.45rem;height:4.05rem;" data-reactid=".ftscu3widc.2.$derivatives.9.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.a"><span data-reactid=".ftscu3widc.2.$derivatives.a.0">What are the differences? In terms of the actual Bézier curve, virtually nothing! We lowered the order (rather than </span><i data-reactid=".ftscu3widc.2.$derivatives.a.1">n</i><span data-reactid=".ftscu3widc.2.$derivatives.a.2">, it&#x27;s now </span><i data-reactid=".ftscu3widc.2.$derivatives.a.3">n-1</i><span data-reactid=".ftscu3widc.2.$derivatives.a.4">), but it&#x27;s still the same Bézier function. The only real difference is in how the weights change when we derive the curve&#x27;s function. If we have four points A, B, C, and D, then the derivative will have three points, the second derivative two, and the third derivative one:</span></p><p data-reactid=".ftscu3widc.2.$derivatives.b"><img class="LaTeX SVG" src="images/latex/6df1b35ac11dc089a02db4f6d04bc3fa17f03e39.svg" style="width:37.125rem;height:5.99985rem;" data-reactid=".ftscu3widc.2.$derivatives.b.0"/></p><p data-reactid=".ftscu3widc.2.$derivatives.c"><span data-reactid=".ftscu3widc.2.$derivatives.c.0">We can keep performing this trick for as long as we have more than one weight. Once we have one weight left, the next step will see </span><i data-reactid=".ftscu3widc.2.$derivatives.c.1">k = 0</i><span data-reactid=".ftscu3widc.2.$derivatives.c.2">, and the result of our &quot;Bézier function&quot; summation is zero, because we&#x27;re not adding anything at all. As such, a quadratic curve has no second derivative, a cubic curve has no third derivative, and generalized: an </span><i data-reactid=".ftscu3widc.2.$derivatives.c.3"><span data-reactid=".ftscu3widc.2.$derivatives.c.3.0">n</span><sup data-reactid=".ftscu3widc.2.$derivatives.c.3.1">th</sup></i><span data-reactid=".ftscu3widc.2.$derivatives.c.4"> order curve has </span><i data-reactid=".ftscu3widc.2.$derivatives.c.5">n-1</i><span data-reactid=".ftscu3widc.2.$derivatives.c.6"> (meaningful) derivatives, with any further derivative being zero.</span></p></section><table class="relatives after" data-reactid=".ftscu3widc.2.2"><tbody data-reactid=".ftscu3widc.2.2.0"><tr data-reactid=".ftscu3widc.2.2.0.0"><td data-reactid=".ftscu3widc.2.2.0.0.0"><a class="prev" href="reordering" data-reactid=".ftscu3widc.2.2.0.0.0.0">10. Lowering and elevating curve order</a></td><td class="toc" data-reactid=".ftscu3widc.2.2.0.0.1"><a class="" href="/" data-reactid=".ftscu3widc.2.2.0.0.1.0">ToC</a></td><td data-reactid=".ftscu3widc.2.2.0.0.2"><a class="next" href="pointvectors" data-reactid=".ftscu3widc.2.2.0.0.2.0">12. Tangents and normals</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".ftscu3widc.3"><span data-reactid=".ftscu3widc.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".ftscu3widc.3.1">almost no rights reserved</a><span data-reactid=".ftscu3widc.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>