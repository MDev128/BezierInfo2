<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Bézier curves and Catmull-Rom curves
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".bbuoarucxs" data-react-checksum="2142210193"><div class="ribbon" data-reactid=".bbuoarucxs.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".bbuoarucxs.0.0"/><map name="githubmap" data-reactid=".bbuoarucxs.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".bbuoarucxs.0.1.0"/></map></div><header data-reactid=".bbuoarucxs.1"><h1 data-reactid=".bbuoarucxs.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".bbuoarucxs.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".bbuoarucxs.2"><table class="relatives before" data-reactid=".bbuoarucxs.2.0"><tbody data-reactid=".bbuoarucxs.2.0.0"><tr data-reactid=".bbuoarucxs.2.0.0.0"><td data-reactid=".bbuoarucxs.2.0.0.0.0"><a class="prev" href="pointcurves" data-reactid=".bbuoarucxs.2.0.0.0.0.0">26. Creating a curve from three points</a></td><td class="toc" data-reactid=".bbuoarucxs.2.0.0.0.1"><a class="" href="/" data-reactid=".bbuoarucxs.2.0.0.0.1.0">ToC</a></td><td data-reactid=".bbuoarucxs.2.0.0.0.2"><a class="next" href="catmullmoulding" data-reactid=".bbuoarucxs.2.0.0.0.2.0">28. Creating a Catmull-Rom curve from three points</a></td></tr></tbody></table><section data-reactid=".bbuoarucxs.2.$catmullconv"><h2 data-num="27" data-reactid=".bbuoarucxs.2.$catmullconv.0"><a href="#catmullconv" data-reactid=".bbuoarucxs.2.$catmullconv.0.0">Bézier curves and Catmull-Rom curves</a></h2><p data-reactid=".bbuoarucxs.2.$catmullconv.1"><span data-reactid=".bbuoarucxs.2.$catmullconv.1.0">Taking an excursion to different splines, the other common design curve is the </span><a href="https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Catmull.E2.80.93Rom_spline" data-reactid=".bbuoarucxs.2.$catmullconv.1.1">Catmull-Rom spline</a><span data-reactid=".bbuoarucxs.2.$catmullconv.1.2">. Now, a Catmull-Rom spline is a form of cubic Hermite spline, and as it so happens the cubic Bézier curve is also a cubic Hermite spline, so maybe... maybe we can convert one into the other, and back, with some simple substitutions?</span></p><p data-reactid=".bbuoarucxs.2.$catmullconv.2"><span data-reactid=".bbuoarucxs.2.$catmullconv.2.0">Unlike Bézier curves, Catmull-Rom splines pass through each point used to define the curve, except the first and last, which makes sense if you read the &quot;natural language&quot; description for how a Catmull-Rom spline works: a Catmull-Rom spline is a curve that, at each point P</span><sub data-reactid=".bbuoarucxs.2.$catmullconv.2.1">x</sub><span data-reactid=".bbuoarucxs.2.$catmullconv.2.2">, has a tangent along the line P</span><sub data-reactid=".bbuoarucxs.2.$catmullconv.2.3">x-1</sub><span data-reactid=".bbuoarucxs.2.$catmullconv.2.4"> to P</span><sub data-reactid=".bbuoarucxs.2.$catmullconv.2.5">x+1</sub><span data-reactid=".bbuoarucxs.2.$catmullconv.2.6">. The curve runs from points P</span><sub data-reactid=".bbuoarucxs.2.$catmullconv.2.7">2</sub><span data-reactid=".bbuoarucxs.2.$catmullconv.2.8"> to  P</span><sub data-reactid=".bbuoarucxs.2.$catmullconv.2.9">n-1</sub><span data-reactid=".bbuoarucxs.2.$catmullconv.2.a">, and has a &quot;tension&quot; that determines how fast the curve passes through each point. The lower the tension, the faster the curve goes through each point, and the bigger its local tangent is.</span></p><p data-reactid=".bbuoarucxs.2.$catmullconv.3">I&#x27;ll be showing the conversion to and from Catmull-Rom curves for the tension that the Processing language uses for its Catmull-Rom algorithm.</p><p data-reactid=".bbuoarucxs.2.$catmullconv.4">We start with showing the Catmull-Rom matrix form:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.5"><img class="LaTeX SVG" src="images/latex/5fc1c44e623f2a9fbeefdaa204557479e3debf5a.svg" style="width:30.150000000000002rem;height:5.70015rem;" data-reactid=".bbuoarucxs.2.$catmullconv.5.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.6">However, there&#x27;s something funny going on here: the coordinate column matrix looks weird. The reason is that Catmull-Rom curves are actually curve segments that are described by two points, and two tangents; the curve leaves a point V1 (if we have four coordinates instead, this is coordinate 2), arriving at a point V2 (coordinate 3), with the curve departing V1 with a tangent vector V&#x27;1 (equal to the tangent from coordinate 1 to coordinate 3) and arriving at V2 with tangent vector V&#x27;2 (equal to the tangent from coordinate 2 to coordinate 4). So if we want to express this as a matrix form based on four coordinates, we get this representation instead:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.7"><img class="LaTeX SVG" src="images/latex/40b9ca9b5755a4be49517ddfa630fef7b8e23067.svg" style="width:29.475rem;height:6.525rem;" data-reactid=".bbuoarucxs.2.$catmullconv.7.0"/></p><div class="note" data-reactid=".bbuoarucxs.2.$catmullconv.8"><h2 data-reactid=".bbuoarucxs.2.$catmullconv.8.0">Where did that 2 come from?</h2><p data-reactid=".bbuoarucxs.2.$catmullconv.8.1">Catmull-Rom splines are based on the concept of tension: the higher the tensions, the shorter the tangents at the departure and arrival points. The basic Catmull-Rom curve arrives and departs with tangents equal to half the distance between the two adjacent points, so that&#x27;s where that 2 came from.</p><p data-reactid=".bbuoarucxs.2.$catmullconv.8.2">However, the &quot;real&quot; matrix is this:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.8.3"><img class="LaTeX SVG" src="images/latex/7bf9b5e971866babedd991ccdde5c4ab104297e5.svg" style="width:24.75rem;height:6.60015rem;" data-reactid=".bbuoarucxs.2.$catmullconv.8.3.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.8.4">This bakes in the tension factor τ explicitly.</p></div><p data-reactid=".bbuoarucxs.2.$catmullconv.9">Plugging this into the &quot;two coordinates and two tangent vectors&quot; matrix form, we get:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.a"><img class="LaTeX SVG" src="images/latex/4818f8797c35f23c2b9883aa986b1129b2fa151a.svg" style="width:21.45015rem;height:5.70015rem;" data-reactid=".bbuoarucxs.2.$catmullconv.a.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.b"><img class="LaTeX SVG" src="images/latex/08f77989369f664cbc0fb7526791efd4c5299d70.svg" style="width:35.47485rem;height:5.47515rem;" data-reactid=".bbuoarucxs.2.$catmullconv.b.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.c"><img class="LaTeX SVG" src="images/latex/c7ae769c5370469b16523bab6f34abf0dd6749be.svg" style="width:28.425150000000002rem;height:5.54985rem;" data-reactid=".bbuoarucxs.2.$catmullconv.c.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.d">So let&#x27;s find out which transformation matrix we need in order to convert from Catmull-Rom to Bézier:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.e"><img class="LaTeX SVG" src="images/latex/7250f1c57e2bd66ec4349e4e88db4d5d74401a06.svg" style="width:50.85rem;height:5.54985rem;" data-reactid=".bbuoarucxs.2.$catmullconv.e.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.f"><span data-reactid=".bbuoarucxs.2.$catmullconv.f.0">The difference is somewhere in the actual hermite matrix, since the </span><em data-reactid=".bbuoarucxs.2.$catmullconv.f.1">t</em><span data-reactid=".bbuoarucxs.2.$catmullconv.f.2"> and coordinate values are identical, so let&#x27;s solve that matrix equasion:</span></p><p data-reactid=".bbuoarucxs.2.$catmullconv.g"><img class="LaTeX SVG" src="images/latex/8a42b24fca3aaf6b8ec08e84b7e91c43e26e8acf.svg" style="width:28.575rem;height:5.54985rem;" data-reactid=".bbuoarucxs.2.$catmullconv.g.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.h">We left-multiply both sides by the inverse of the Bézier matrix, to get rid of the Bézier matrix on the right side of the equals sign:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.i"><img class="LaTeX SVG" src="images/latex/0e111d6e846f4d7204dec484005f74993e66c6c9.svg" style="width:58.19985rem;height:5.70015rem;" data-reactid=".bbuoarucxs.2.$catmullconv.i.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.j">Which gives us:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.k"><img class="LaTeX SVG" src="images/latex/f94b80113772d90a4fbc93d4495cb5767e5c8123.svg" style="width:12.6rem;height:5.47515rem;" data-reactid=".bbuoarucxs.2.$catmullconv.k.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.l"><span data-reactid=".bbuoarucxs.2.$catmullconv.l.0">Multiplying this </span><strong data-reactid=".bbuoarucxs.2.$catmullconv.l.1"><em data-reactid=".bbuoarucxs.2.$catmullconv.l.1.0">A</em></strong><span data-reactid=".bbuoarucxs.2.$catmullconv.l.2"> with our coordinates will give us a proper Bézier matrix expression again:</span></p><p data-reactid=".bbuoarucxs.2.$catmullconv.m"><img class="LaTeX SVG" src="images/latex/d088274e440ceeac2916a0f32176682d776c1c57.svg" style="width:31.725rem;height:5.47515rem;" data-reactid=".bbuoarucxs.2.$catmullconv.m.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.n"><img class="LaTeX SVG" src="images/latex/9e68f80b270d3445d9f9cb28ff2c5aed219aa9d2.svg" style="width:25.650000000000002rem;height:6.60015rem;" data-reactid=".bbuoarucxs.2.$catmullconv.n.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.o">So a Catmull-Rom to Bézier conversion, based on coordinates, requires turning the Catmull-Rom coordinates on the left into the Bézier coordinates on the right (with τ being our tension factor):</p><p data-reactid=".bbuoarucxs.2.$catmullconv.p"><img class="LaTeX SVG" src="images/latex/f0c5a707b590eaf8899a927ce39fd186a6acecf3.svg" style="width:18.07515rem;height:6.67485rem;" data-reactid=".bbuoarucxs.2.$catmullconv.p.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.q">And the other way around, a Bézier to Catmull-Rom conversion requires turning the Bézier coordinates on the left this time into the Catmull-Rom coordinates on the right. Note that there is no tension this time, because Bézier curves don&#x27;t have any. Converting from Bézier to Catmull-Rom is simply a default-tension Catmull-Rom curve:</p><p data-reactid=".bbuoarucxs.2.$catmullconv.r"><img class="LaTeX SVG" src="images/latex/51da95daf2645abd9903a4e28749a6d01826625c.svg" style="width:21.150000000000002rem;height:5.625rem;" data-reactid=".bbuoarucxs.2.$catmullconv.r.0"/></p><p data-reactid=".bbuoarucxs.2.$catmullconv.s">Done. We can now draw the curves we want using either Bézier curves or Catmull-Rom splines, the choice mostly being which drawing algorithms we have natively available.</p></section><table class="relatives after" data-reactid=".bbuoarucxs.2.2"><tbody data-reactid=".bbuoarucxs.2.2.0"><tr data-reactid=".bbuoarucxs.2.2.0.0"><td data-reactid=".bbuoarucxs.2.2.0.0.0"><a class="prev" href="pointcurves" data-reactid=".bbuoarucxs.2.2.0.0.0.0">26. Creating a curve from three points</a></td><td class="toc" data-reactid=".bbuoarucxs.2.2.0.0.1"><a class="" href="/" data-reactid=".bbuoarucxs.2.2.0.0.1.0">ToC</a></td><td data-reactid=".bbuoarucxs.2.2.0.0.2"><a class="next" href="catmullmoulding" data-reactid=".bbuoarucxs.2.2.0.0.2.0">28. Creating a Catmull-Rom curve from three points</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".bbuoarucxs.3"><span data-reactid=".bbuoarucxs.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".bbuoarucxs.3.1">almost no rights reserved</a><span data-reactid=".bbuoarucxs.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>