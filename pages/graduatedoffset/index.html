<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Graduated curve offsetting
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".1gedvkf0sn4" data-react-checksum="-1864215729"><div class="ribbon" data-reactid=".1gedvkf0sn4.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".1gedvkf0sn4.0.0"/><map name="githubmap" data-reactid=".1gedvkf0sn4.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".1gedvkf0sn4.0.1.0"/></map></div><header data-reactid=".1gedvkf0sn4.1"><h1 data-reactid=".1gedvkf0sn4.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".1gedvkf0sn4.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".1gedvkf0sn4.2"><table class="relatives before" data-reactid=".1gedvkf0sn4.2.0"><tbody data-reactid=".1gedvkf0sn4.2.0.0"><tr data-reactid=".1gedvkf0sn4.2.0.0.0"><td data-reactid=".1gedvkf0sn4.2.0.0.0.0"><a class="prev" href="offsetting" data-reactid=".1gedvkf0sn4.2.0.0.0.0.0">32. Curve offsetting</a></td><td class="toc" data-reactid=".1gedvkf0sn4.2.0.0.0.1"><a class="" href="/" data-reactid=".1gedvkf0sn4.2.0.0.0.1.0">ToC</a></td><td data-reactid=".1gedvkf0sn4.2.0.0.0.2"><a class="next" href="circles" data-reactid=".1gedvkf0sn4.2.0.0.0.2.0">34. Circles and quadratic Bézier curves</a></td></tr></tbody></table><section data-reactid=".1gedvkf0sn4.2.$graduatedoffset"><h2 data-num="33" data-reactid=".1gedvkf0sn4.2.$graduatedoffset.0"><a href="#graduatedoffset" data-reactid=".1gedvkf0sn4.2.$graduatedoffset.0.0">Graduated curve offsetting</a></h2><p data-reactid=".1gedvkf0sn4.2.$graduatedoffset.1"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.1.0">What if we want to do graduated offsetting, starting at some distance </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.1.1">s</i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.1.2"> but ending at some other distance </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.1.3">e</i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.1.4">? well, if we can compute the length of a curve (which we can if we use the Legendre-Gauss quadrature approach) then we can also determine how far &quot;along the line&quot; any point on the curve is. With that knowledge, we can offset a curve so that its offset curve is not uniformly wide, but graduated between with two different offset widths at the start and end.</span></p><p data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2.0">Like normal offsetting we cut up our curve in sub-curves, and then check at which distance along the original curve each sub-curve starts and ends, as well as to which point on the curve each of the control points map. This gives us the distance-along-the-curve for each interesting point in the sub-curve. If we call the total length of all sub-curves seen prior to seeing &quot;the\ current&quot; sub-curve </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2.1">S</i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2.2"> (and if the current sub-curve is the first one, </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2.3">S</i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2.4"> is zero), and we call the full length of our original curve </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2.5">L</i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.2.6">, then we get the following graduation values:</span></p><ul data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3"><li data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.0"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.0.0">start: map </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.0.1">S</i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.0.2"> from interval (</span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.0.3">0,L</i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.0.4">) to interval </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.0.5">(s,e)</i></li><li data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.1"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.1.0">c1: </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.1.1"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.1.1.0">map(</span><strong data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.1.1.1">S+d1</strong><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.1.1.2">, 0,L, s,e)</span></i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.1.2">, d1 = distance along curve to projection of c1</span></li><li data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.2"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.2.0">c2: </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.2.1"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.2.1.0">map(</span><strong data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.2.1.1">S+d2</strong><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.2.1.2">, 0,L, s,e)</span></i><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.2.2">, d2 = distance along curve to projection of c2</span></li><li data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.3">...</li><li data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.4"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.4.0">end: </span><i data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.4.1"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.4.1.0">map(</span><strong data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.4.1.1">S+length(subcurve)</strong><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.3.4.1.2">, 0,L, s,e)</span></i></li></ul><p data-reactid=".1gedvkf0sn4.2.$graduatedoffset.4">At each of the relevant points (start, end, and the projections of the control points onto the curve) we know the curve&#x27;s normal, so offsetting is simply a matter of taking our original point, and moving it along the normal vector by the offset distance for each point. Doing so will give us the following result (these have with a starting width of 0, and an end width of 40 pixels, but can be controlled with your up and down arrow keys):</p><figure class="false" data-reactid=".1gedvkf0sn4.2.$graduatedoffset.5"><canvas tabindex="0" data-reactid=".1gedvkf0sn4.2.$graduatedoffset.5.0"></canvas><figcaption data-reactid=".1gedvkf0sn4.2.$graduatedoffset.5.1"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.5.1.0">Offsetting a quadratic Bézier curve</span><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.5.1.1"> </span></figcaption></figure><figure class="false" data-reactid=".1gedvkf0sn4.2.$graduatedoffset.6"><canvas tabindex="0" data-reactid=".1gedvkf0sn4.2.$graduatedoffset.6.0"></canvas><figcaption data-reactid=".1gedvkf0sn4.2.$graduatedoffset.6.1"><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.6.1.0">Offsetting a cubic Bézier curve</span><span data-reactid=".1gedvkf0sn4.2.$graduatedoffset.6.1.1"> </span></figcaption></figure></section><table class="relatives after" data-reactid=".1gedvkf0sn4.2.2"><tbody data-reactid=".1gedvkf0sn4.2.2.0"><tr data-reactid=".1gedvkf0sn4.2.2.0.0"><td data-reactid=".1gedvkf0sn4.2.2.0.0.0"><a class="prev" href="offsetting" data-reactid=".1gedvkf0sn4.2.2.0.0.0.0">32. Curve offsetting</a></td><td class="toc" data-reactid=".1gedvkf0sn4.2.2.0.0.1"><a class="" href="/" data-reactid=".1gedvkf0sn4.2.2.0.0.1.0">ToC</a></td><td data-reactid=".1gedvkf0sn4.2.2.0.0.2"><a class="next" href="circles" data-reactid=".1gedvkf0sn4.2.2.0.0.2.0">34. Circles and quadratic Bézier curves</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".1gedvkf0sn4.3"><span data-reactid=".1gedvkf0sn4.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".1gedvkf0sn4.3.1">almost no rights reserved</a><span data-reactid=".1gedvkf0sn4.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>