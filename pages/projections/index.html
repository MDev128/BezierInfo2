<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Projecting a point onto a Bézier curve
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".ajqbkfamm8" data-react-checksum="-1640044302"><div class="ribbon" data-reactid=".ajqbkfamm8.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".ajqbkfamm8.0.0"/><map name="githubmap" data-reactid=".ajqbkfamm8.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".ajqbkfamm8.0.1.0"/></map></div><header data-reactid=".ajqbkfamm8.1"><h1 data-reactid=".ajqbkfamm8.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".ajqbkfamm8.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".ajqbkfamm8.2"><table class="relatives before" data-reactid=".ajqbkfamm8.2.0"><tbody data-reactid=".ajqbkfamm8.2.0.0"><tr data-reactid=".ajqbkfamm8.2.0.0.0"><td data-reactid=".ajqbkfamm8.2.0.0.0.0"><a class="prev" href="shapes" data-reactid=".ajqbkfamm8.2.0.0.0.0.0">30. Boolean shape operations</a></td><td class="toc" data-reactid=".ajqbkfamm8.2.0.0.0.1"><a class="" href="/" data-reactid=".ajqbkfamm8.2.0.0.0.1.0">ToC</a></td><td data-reactid=".ajqbkfamm8.2.0.0.0.2"><a class="next" href="offsetting" data-reactid=".ajqbkfamm8.2.0.0.0.2.0">32. Curve offsetting</a></td></tr></tbody></table><section data-reactid=".ajqbkfamm8.2.$projections"><h2 data-num="31" data-reactid=".ajqbkfamm8.2.$projections.0"><a href="#projections" data-reactid=".ajqbkfamm8.2.$projections.0.0">Projecting a point onto a Bézier curve</a></h2><p data-reactid=".ajqbkfamm8.2.$projections.1"><span data-reactid=".ajqbkfamm8.2.$projections.1.0">Say we have a Bézier curve and some point, not on the curve, of which we want to know which </span><i data-reactid=".ajqbkfamm8.2.$projections.1.1">t</i><span data-reactid=".ajqbkfamm8.2.$projections.1.2"> value on the curve gives us an on-curve point closest to our off-curve point. Or: say we want to find the projection of a random point onto a curve. How do we do that?</span></p><p data-reactid=".ajqbkfamm8.2.$projections.2"><span data-reactid=".ajqbkfamm8.2.$projections.2.0">If the Bézier curve is of low enough order, we might be able to </span><a href="http://jazzros.blogspot.ca/2011/03/projecting-point-on-bezier-curve.html" data-reactid=".ajqbkfamm8.2.$projections.2.1">work out the maths for how to do this</a><span data-reactid=".ajqbkfamm8.2.$projections.2.2">, and get a perfect </span><i data-reactid=".ajqbkfamm8.2.$projections.2.3">t</i><span data-reactid=".ajqbkfamm8.2.$projections.2.4"> value back, but in general this is an incredibly hard problem and the easiest solution is, really, a numerical approach again. We&#x27;ll be finding our ideal </span><i data-reactid=".ajqbkfamm8.2.$projections.2.5">t</i><span data-reactid=".ajqbkfamm8.2.$projections.2.6"> value using a </span><a href="https://en.wikipedia.org/wiki/Binary_search_algorithm" data-reactid=".ajqbkfamm8.2.$projections.2.7">binary search</a><span data-reactid=".ajqbkfamm8.2.$projections.2.8">. First, we do a coarse distance-check based on </span><i data-reactid=".ajqbkfamm8.2.$projections.2.9">t</i><span data-reactid=".ajqbkfamm8.2.$projections.2.a"> values associated with the curve&#x27;s &quot;to draw&quot; coordinates (using a lookup table, or LUT). This is pretty fast. Then we run this algorithm:</span></p><ol data-reactid=".ajqbkfamm8.2.$projections.3"><li data-reactid=".ajqbkfamm8.2.$projections.3.0"><span data-reactid=".ajqbkfamm8.2.$projections.3.0.0">with the </span><i data-reactid=".ajqbkfamm8.2.$projections.3.0.1">t</i><span data-reactid=".ajqbkfamm8.2.$projections.3.0.2"> value we found, start with some small interval around </span><i data-reactid=".ajqbkfamm8.2.$projections.3.0.3">t</i><span data-reactid=".ajqbkfamm8.2.$projections.3.0.4"> (1/length_of_LUT on either side is a reasonable start),</span></li><li data-reactid=".ajqbkfamm8.2.$projections.3.1"><span data-reactid=".ajqbkfamm8.2.$projections.3.1.0">if the distance to </span><i data-reactid=".ajqbkfamm8.2.$projections.3.1.1">t ± interval/2</i><span data-reactid=".ajqbkfamm8.2.$projections.3.1.2"> is larger than the distance to </span><i data-reactid=".ajqbkfamm8.2.$projections.3.1.3">t</i><span data-reactid=".ajqbkfamm8.2.$projections.3.1.4">, try again with the interval reduced to half its original length.</span></li><li data-reactid=".ajqbkfamm8.2.$projections.3.2"><span data-reactid=".ajqbkfamm8.2.$projections.3.2.0">if the distance to </span><i data-reactid=".ajqbkfamm8.2.$projections.3.2.1">t ± interval/2</i><span data-reactid=".ajqbkfamm8.2.$projections.3.2.2"> is smaller than the distance to </span><i data-reactid=".ajqbkfamm8.2.$projections.3.2.3">t</i><span data-reactid=".ajqbkfamm8.2.$projections.3.2.4">, replace </span><i data-reactid=".ajqbkfamm8.2.$projections.3.2.5">t</i><span data-reactid=".ajqbkfamm8.2.$projections.3.2.6"> with the smaller-distance value.</span></li><li data-reactid=".ajqbkfamm8.2.$projections.3.3"><span data-reactid=".ajqbkfamm8.2.$projections.3.3.0">after reducing the interval, or changing </span><i data-reactid=".ajqbkfamm8.2.$projections.3.3.1">t</i><span data-reactid=".ajqbkfamm8.2.$projections.3.3.2">, go back to step 1.</span></li></ol><p data-reactid=".ajqbkfamm8.2.$projections.4"><span data-reactid=".ajqbkfamm8.2.$projections.4.0">We keep repeating this process until the interval is small enough to claim the difference in precision found is irrelevant for the purpose we&#x27;re trying to find </span><i data-reactid=".ajqbkfamm8.2.$projections.4.1">t</i><span data-reactid=".ajqbkfamm8.2.$projections.4.2"> for. In this case, I&#x27;m arbitrarily fixing it at 0.0001.</span></p><p data-reactid=".ajqbkfamm8.2.$projections.5"><span data-reactid=".ajqbkfamm8.2.$projections.5.0">The following graphic demonstrates the result of this procedure.Simply move the cursor around, and if it does not lie on top of the curve, you will see a line that projects the cursor onto the curve based on an iteratively found &quot;ideal&quot; </span><i data-reactid=".ajqbkfamm8.2.$projections.5.1">t</i><span data-reactid=".ajqbkfamm8.2.$projections.5.2"> value.</span></p><figure class="false" data-reactid=".ajqbkfamm8.2.$projections.6"><canvas tabindex="0" data-reactid=".ajqbkfamm8.2.$projections.6.0"></canvas><figcaption data-reactid=".ajqbkfamm8.2.$projections.6.1"><span data-reactid=".ajqbkfamm8.2.$projections.6.1.0">Projecting a point onto a Bézier curve</span><span data-reactid=".ajqbkfamm8.2.$projections.6.1.1"> </span></figcaption></figure></section><table class="relatives after" data-reactid=".ajqbkfamm8.2.2"><tbody data-reactid=".ajqbkfamm8.2.2.0"><tr data-reactid=".ajqbkfamm8.2.2.0.0"><td data-reactid=".ajqbkfamm8.2.2.0.0.0"><a class="prev" href="shapes" data-reactid=".ajqbkfamm8.2.2.0.0.0.0">30. Boolean shape operations</a></td><td class="toc" data-reactid=".ajqbkfamm8.2.2.0.0.1"><a class="" href="/" data-reactid=".ajqbkfamm8.2.2.0.0.1.0">ToC</a></td><td data-reactid=".ajqbkfamm8.2.2.0.0.2"><a class="next" href="offsetting" data-reactid=".ajqbkfamm8.2.2.0.0.2.0">32. Curve offsetting</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".ajqbkfamm8.3"><span data-reactid=".ajqbkfamm8.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".ajqbkfamm8.3.1">almost no rights reserved</a><span data-reactid=".ajqbkfamm8.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>