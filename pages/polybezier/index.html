<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<title>
Forming poly-Bézier curves
</title>
<base href='..'>
</head>
<body>
<div data-reactid=".2elnc98dmo0" data-react-checksum="214532612"><div class="ribbon" data-reactid=".2elnc98dmo0.0"><img src="images/ribbon.png" alt="This page on GitHub" usemap="#githubmap" width="200px" height="149px" data-reactid=".2elnc98dmo0.0.0"/><map name="githubmap" data-reactid=".2elnc98dmo0.0.1"><area shape="poly" coords="30,0, 200,0, 200,114" href="http://github.com/pomax/BezierInfo-2" alt="This page on GitHub" data-reactid=".2elnc98dmo0.0.1.0"/></map></div><header data-reactid=".2elnc98dmo0.1"><h1 data-reactid=".2elnc98dmo0.1.0">A Primer on Bézier Curves</h1><h2 data-reactid=".2elnc98dmo0.1.1">A free, online book for when you really need to know how to do Bézier things.</h2></header><div data-reactid=".2elnc98dmo0.2"><table class="relatives before" data-reactid=".2elnc98dmo0.2.0"><tbody data-reactid=".2elnc98dmo0.2.0.0"><tr data-reactid=".2elnc98dmo0.2.0.0.0"><td data-reactid=".2elnc98dmo0.2.0.0.0.0"><a class="prev" href="catmullmoulding" data-reactid=".2elnc98dmo0.2.0.0.0.0.0">28. Creating a Catmull-Rom curve from three points</a></td><td class="toc" data-reactid=".2elnc98dmo0.2.0.0.0.1"><a class="" href="/" data-reactid=".2elnc98dmo0.2.0.0.0.1.0">ToC</a></td><td data-reactid=".2elnc98dmo0.2.0.0.0.2"><a class="next" href="shapes" data-reactid=".2elnc98dmo0.2.0.0.0.2.0">30. Boolean shape operations</a></td></tr></tbody></table><section data-reactid=".2elnc98dmo0.2.$polybezier"><h2 data-num="29" data-reactid=".2elnc98dmo0.2.$polybezier.0"><a href="#polybezier" data-reactid=".2elnc98dmo0.2.$polybezier.0.0">Forming poly-Bézier curves</a></h2><p data-reactid=".2elnc98dmo0.2.$polybezier.1">Much like lines can be chained together to form polygons, Bézier curves can be chained together to form poly-Béziers, and the only trick required is to make sure that:</p><ol data-reactid=".2elnc98dmo0.2.$polybezier.2"><li data-reactid=".2elnc98dmo0.2.$polybezier.2.0">the end point of each section is the starting point of the following section, and</li><li data-reactid=".2elnc98dmo0.2.$polybezier.2.1">the derivatives across that dual point line up.</li></ol><p data-reactid=".2elnc98dmo0.2.$polybezier.3">Unless, of course, you want discontinuities; then you don&#x27;t even need 2.</p><p data-reactid=".2elnc98dmo0.2.$polybezier.4">We&#x27;ll cover three forms of poly-Bézier curves in this section. First, we&#x27;ll look at the kind that just follows point 1. where the end point of a segment is the same point as the start point of the next segment. This leads to poly-Béziers that are pretty hard to work with, but they&#x27;re the easiest to implement:</p><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.5"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.5.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.5.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.5.1.0">Unlinked quadratic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.5.1.1"> </span></figcaption></figure><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.6"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.6.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.6.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.6.1.0">Unlinked cubic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.6.1.1"> </span></figcaption></figure><p data-reactid=".2elnc98dmo0.2.$polybezier.7">Dragging the control points around only affects the curve segments that the control point belongs to, and moving an on-curve point leaves the control points where they are, which is not the most useful for practical modelling purposes. So, let&#x27;s add in the logic we need to make things a little better. We&#x27;ll start by linking up control points by ensuring that the &quot;incoming&quot; derivative at an on-curve point is the same as it&#x27;s &quot;outgoing&quot; derivative:</p><p data-reactid=".2elnc98dmo0.2.$polybezier.8"><img class="LaTeX SVG" src="images/latex/37740bb1a0b7b1ff48bf3454e52295fc717cacbb.svg" style="width:8.400150000000002rem;height:1.27485rem;" data-reactid=".2elnc98dmo0.2.$polybezier.8.0"/></p><p data-reactid=".2elnc98dmo0.2.$polybezier.9">We can effect this quite easily, because we know that the vector from a curve&#x27;s last control point to its last on-curve point is equal to the derivative vector. If we want to ensure that the first control point of the next curve matches that, all we have to do is mirror that last control point through the last on-curve point. And mirroring any point A through any point B is really simple:</p><p data-reactid=".2elnc98dmo0.2.$polybezier.a"><img class="LaTeX SVG" src="images/latex/ce6e3939608c4ed0598107b06543c2301b91bb7f.svg" style="width:21.97485rem;height:2.7rem;" data-reactid=".2elnc98dmo0.2.$polybezier.a.0"/></p><p data-reactid=".2elnc98dmo0.2.$polybezier.b">So let&#x27;s implement that and see what it gets us. The following two graphics show a quadratic and a cubic poly-Bézier curve again, but this time moving the control points around moves others, too. However, you might see something unexpected going on for quadratic curves...</p><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.c"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.c.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.c.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.c.1.0">Loosely connected quadratic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.c.1.1"> </span></figcaption></figure><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.d"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.d.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.d.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.d.1.0">Loosely connected cubic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.d.1.1"> </span></figcaption></figure><p data-reactid=".2elnc98dmo0.2.$polybezier.e">As you can see, quadratic curves are particularly ill-suited for poly-Bézier curves, as all the control points are effectively linked. Move one of them, and you move all of them. Not only that, but if we move the on-curve points, it&#x27;s possible to get a situation where a control point&#x27;s positions is different depending on whether it&#x27;s the reflection of its left or right neighbouring control point: we can&#x27;t even form a proper rule-conforming curve! This means that we cannot use quadratic poly-Béziers for anything other than really, really simple shapes. And even then, they&#x27;re probably the wrong choice. Cubic curves are pretty decent, but the fact that the derivatives are linked means we can&#x27;t manipulate curves as well as we might if we relaxed the constraints a little.</p><p data-reactid=".2elnc98dmo0.2.$polybezier.f">So: let&#x27;s relax the requirement a little.</p><p data-reactid=".2elnc98dmo0.2.$polybezier.g"><span data-reactid=".2elnc98dmo0.2.$polybezier.g.0">We can change the constraint so that we still preserve the </span><em data-reactid=".2elnc98dmo0.2.$polybezier.g.1">angle</em><span data-reactid=".2elnc98dmo0.2.$polybezier.g.2"> of the derivatives across sections (so transitions from one section to the next will still look natural), but give up the requirement that they should also have the same </span><em data-reactid=".2elnc98dmo0.2.$polybezier.g.3">vector length</em><span data-reactid=".2elnc98dmo0.2.$polybezier.g.4">. Doing so will give us a much more useful kind of poly-Bézier curve:</span></p><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.h"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.h.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.h.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.h.1.0">Loosely connected quadratic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.h.1.1"> </span></figcaption></figure><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.i"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.i.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.i.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.i.1.0">Loosely connected cubic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.i.1.1"> </span></figcaption></figure><p data-reactid=".2elnc98dmo0.2.$polybezier.j">Cubic curves are now better behaved when it comes to dragging control points around, but the quadratic poly-Bézier still has the problem that moving one control points will move the control points and may ending up defining &quot;the next&quot; control point in a way that doesn&#x27;t work. Quadratic curves really aren&#x27;t very useful to work with...</p><p data-reactid=".2elnc98dmo0.2.$polybezier.k">Finally, we also want to make sure that moving the on-curve coordinates preserves the relative positions of the associated control points. With that, we get to the kind of curve control that you might be familiar with from applications like Photoshop, Inkscape, Blender, etc.</p><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.l"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.l.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.l.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.l.1.0">Loosely connected quadratic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.l.1.1"> </span></figcaption></figure><figure class="false" data-reactid=".2elnc98dmo0.2.$polybezier.m"><canvas tabindex="0" data-reactid=".2elnc98dmo0.2.$polybezier.m.0"></canvas><figcaption data-reactid=".2elnc98dmo0.2.$polybezier.m.1"><span data-reactid=".2elnc98dmo0.2.$polybezier.m.1.0">Loosely connected cubic poly-Bézier</span><span data-reactid=".2elnc98dmo0.2.$polybezier.m.1.1"> </span></figcaption></figure><p data-reactid=".2elnc98dmo0.2.$polybezier.n">Again, we see that cubic curves are now rather nice to work with, but quadratic curves have a new, very serious problem: we can move an on-curve point in such a way that we can&#x27;t compute what needs to &quot;happen next&quot;. Move the top point down, below the left and right points, for instance. There is no way to preserve correct control points without a kink at the bottom point. Quadratic curves: just not that good...</p><p data-reactid=".2elnc98dmo0.2.$polybezier.o">A final improvement is to offer fine-level control over which points behave which, so that you can have &quot;kinks&quot; or individually controlled segments when you need them, with nicely well-behaved curves for the rest of the path. Implementing that, is left as an excercise for the reader.</p></section><table class="relatives after" data-reactid=".2elnc98dmo0.2.2"><tbody data-reactid=".2elnc98dmo0.2.2.0"><tr data-reactid=".2elnc98dmo0.2.2.0.0"><td data-reactid=".2elnc98dmo0.2.2.0.0.0"><a class="prev" href="catmullmoulding" data-reactid=".2elnc98dmo0.2.2.0.0.0.0">28. Creating a Catmull-Rom curve from three points</a></td><td class="toc" data-reactid=".2elnc98dmo0.2.2.0.0.1"><a class="" href="/" data-reactid=".2elnc98dmo0.2.2.0.0.1.0">ToC</a></td><td data-reactid=".2elnc98dmo0.2.2.0.0.2"><a class="next" href="shapes" data-reactid=".2elnc98dmo0.2.2.0.0.2.0">30. Boolean shape operations</a></td></tr></tbody></table></div><footer class="copyright" data-reactid=".2elnc98dmo0.3"><span data-reactid=".2elnc98dmo0.3.0">This article is © 2011-2016 to me, Mike &quot;Pomax&quot; Kamermans, but the text, code, and images are </span><a href="https://github.com/Pomax/bezierinfo/blob/gh-pages/LICENSE.md" data-reactid=".2elnc98dmo0.3.1">almost no rights reserved</a><span data-reactid=".2elnc98dmo0.3.2">. Go do something cool with it!</span></footer></div>
</body>
</html>